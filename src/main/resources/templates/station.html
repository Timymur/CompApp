<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title th:text="${title}"></title>
  <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> -->
  
  <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
  <div class="dashboard">

    <header th:replace="blocks/header :: header"></header>
    
    <div class="main-grid">

      <div class="block">
        <div id="stationLink">
          <div class="block-title" >Станция</div>
          <div>
              <p th:text="'АГНКС-' +   ${station.number} + ' г. ' + ${station.city}" > </p>
              <p th:if="${workerOnSmena != null}" th:text="'На смене: ' + ${workerOnSmena.surname} + ' ' + ${workerOnSmena.name}"> </p>
              <p th:if="${workerOnSmena == null}">Пересменка</p>
          </div>
        </div>
        
         <table class="data-table" th:if="${compressors != null}">
          <tr><th>Оборудование</th><th>Статус</th><th>Ошибка</th></tr>
          <tr th:each="compressor : ${compressors}">
            <td th:text="'Компрессор ' + ${compressor.number}"></td>
            <td th:text="${lastReportsMap[compressor.id] != null and lastReportsMap[compressor.id].inWork} ? 'В работе' : 'Авария'"></td>
            <td th:text="${lastReportsMap[compressor.id] != null ? lastReportsMap[compressor.id].error : 'Нет ошибок'}"></td>
          </tr>
        </table>
  
        <p th:if="${compressors == null or #lists.isEmpty(compressors)}">На этой станции нет компрессоров</p>
      </div>

      <div class="block ">
        <div class="block-title" ><span>Оборудование</span> <a href="/addCompressor">Добавить</a></div>
        <ul class="menu-list" th:if="${compressors != null}" th:each="compressor : ${compressors}">
          <li th:text="'Компрессор ' + ${compressor.number} + ' Модель: ' + ${compressor.model}"></li>
        </ul>
        <p th:if="${compressors == null or #lists.isEmpty(compressors)}">На этой станции нет компрессоров</p>
      </div>
      
      <div class="block" >
        <div class="block-title" >Список трудящихся</div>
          <p th:if="${boss != null}" th:text="'Начальник: ' + ${boss.surname} + ' ' + ${boss.name}"></p>
          <p th:if="${boss == null}">Начальник не назначен</p>

          <ul class="stats-list" th:each="worker : ${workers}">
            <li th:text="${worker.role} + ': ' + ${worker.surname} + ' ' +  ${worker.name}"></li>
          </ul>
      </div>
      

      <div class="block ">
        <div class="block-title">Задания по станции</div>
        <table class="data-table">
          <tr><th>Задание</th><th>Статус</th></tr>
          <tr><td>Тема</td><td>✅</td></tr>
          <tr><td>Тема</td><td>❌</td></tr> 
        </table>
      </div>

      
    </div>
  </div>
  <script th:src="@{/js/script.js}"></script>

</body>
</html>


